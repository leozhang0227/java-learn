package com.leo.concurrent;

import java.util.concurrent.CountDownLatch;

public class TestCountDownLatch {
	
	public static void main(String[] args)
	{
		final CountDownLatch latch = new CountDownLatch(2);
		new Thread(){

			@Override
			public void run() {
				 try {
					 System.out.println("子线程"+Thread.currentThread().getName()+"正在执行"); 
               
					Thread.sleep(3000);
				
                System.out.println("子线程"+Thread.currentThread().getName()+"执行完毕"); 
                latch.countDown();
				 } catch (InterruptedException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					} 
			}
			
		}.start();
		new Thread(){

			@Override
			public void run() {
				 try {
					 System.out.println("子线程"+Thread.currentThread().getName()+"正在执行"); 
               
					Thread.sleep(3000);
				
                System.out.println("子线程"+Thread.currentThread().getName()+"执行完毕"); 
                latch.countDown();
				 } catch (InterruptedException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					} 
			}
			
		}.start();
		
		System.out.println("等待2个子线程执行完毕..."); 
        try {
			latch.await();
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} 
        System.out.println("2个子线程已经执行完毕"); 
        System.out.println("继续执行主线程"); 
		
	}
	/*
	     public static void main(String[] args) {     
	         final CountDownLatch latch = new CountDownLatch(2); 
	           
	         new Thread(){ 
	             public void run() { 
	                 try { 
	                     System.out.println("子线程"+Thread.currentThread().getName()+"正在执行"); 
	                    Thread.sleep(3000); 
	                    System.out.println("子线程"+Thread.currentThread().getName()+"执行完毕"); 
	                    System.out.println("kankan1"); 
	                    latch.countDown(); 
	                    
	                } catch (InterruptedException e) { 
	                    e.printStackTrace(); 
	                } 
	             }; 
	         }.start(); 
	           
	         new Thread(){ 
	             public void run() { 
	                 try { 
	                     System.out.println("子线程"+Thread.currentThread().getName()+"正在执行"); 
	                     Thread.sleep(3000); 
	                     System.out.println("子线程"+Thread.currentThread().getName()+"执行完毕"); 
	                     System.out.println("kankan2"); 
	                     latch.countDown(); 
	                     
	                } catch (InterruptedException e) { 
	                    e.printStackTrace(); 
	                } 
	             }; 
	         }.start(); 
	           
	         try { 
	             System.out.println("等待2个子线程执行完毕..."); 
	            latch.await(); 
	            System.out.println("2个子线程已经执行完毕"); 
	            System.out.println("继续执行主线程"); 
	        } catch (InterruptedException e) { 
	            e.printStackTrace(); 
	        } 
	     }  */
	}


